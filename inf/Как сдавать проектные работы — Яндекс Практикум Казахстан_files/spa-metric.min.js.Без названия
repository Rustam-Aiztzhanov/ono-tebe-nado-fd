!function(e){var t=window.requestAnimationFrame,a=console;if(!e)throw new Error("Rum: interface is not included");if(e.enabled){e.sendAnimationSpeed=function(a,i,r){if(t){var n=[],s=e.getTime(),o=e.getTime();!function d(){t((function(){var t=e.getTime();n.push(t-o),o=t,t-s<i?d():(e.sendDelta(a+".avg",function(e){for(var t=e.length,a=0,i=0;i<t;i++)a+=e[i];return a/t}(n),r),e.sendDelta(a+".mdn",function(e){var t=e.sort((function(e,t){return e-t})),a=e.length>>1;return t.length%2?t[a]:(t[a-1]+t[a])/2}(n),r))}))}()}};var i={},r={};e.spa={makeSpaSubPage:function(t,a,n,s,o){a=a||{finishDataLoadingMetric:!0,startDataRenderingMetric:!0,finishDataRenderingMetric:!0},n=n||!1,(s=s||!1)&&e.completeSession();var d=e.makeSubPage((n?"block":"page")+"."+t);return o&&Object.keys(o).forEach((function(e){d[e]=o[e]})),r[t]={spaMetricsOptions:a},i[t]=d,d},startStubRendering:function(s,o){o=!1!==o;var d=i[s],g=r[s];if(d&&g)if(g.stubRenderingStartTime)a.error("startStubRendering have been called repeatedly for subpage "+s+".");else{var p=e.getTime();g.stubRenderingStartTime=p,g.spaMetricsOptions&&g.spaMetricsOptions.startStubRenderingMetric&&e.sendDelta("stub.render.start",p-Number(d[689.2322]),d),o&&t&&t((function(){n(s)}))}else a.error("No subpage "+s+".")},finishStubRendering:n,startDataLoading:function(t){var n=i[t],s=r[t];if(n&&s)if(s.dataLoadingStartTime)a.error("startDataLoading have been called repeatedly for subpage "+t+".");else{var o=e.getTime();s.dataLoadingStartTime=o,s.spaMetricsOptions&&s.spaMetricsOptions.startDataLoadingMetric&&e.sendDelta("data.load.start",o-Number(n[689.2322]),n)}else a.error("No subpage "+t+".")},finishDataLoading:function(t,n){n=n||!1;var s=i[t],o=r[t];if(s&&o)if(o.dataLoadingFinishTime)a.error("finishDataLoading have been called repeatedly for subpage "+t+".");else{var d=e.getTime();o.dataLoadingFinishTime=d,!o.dataLoadingStartTime&&o.spaMetricsOptions&&o.spaMetricsOptions.startDataLoadingMetric&&a.error("No dataLoadingStartTime for subpage "+t+"."),o.spaMetricsOptions&&o.spaMetricsOptions.finishDataLoadingMetric&&e.sendDelta("data.load.finish."+(n?"cache":"network"),d-(o.dataLoadingStartTime||Number(s[689.2322])),s)}else a.error("No subpage "+t+".")},startDataRendering:function(n,o,d,g){o=o||"",d=!1!==d,g="number"==typeof g?g:1e3;var p=i[n],u=r[n];if(p&&u)if(u.dataLoadingFinishTime)if(u.dataRenderingStartTime)a.error("startDataRendering have been called repeatedly for subpage "+n+".");else{var c=e.getTime();u.dataRenderingStartTime=c,u.spaMetricsOptions&&u.spaMetricsOptions.startDataRenderingMetric&&e.sendDelta("data.render.start"+(o?"."+o:""),c-u.dataLoadingFinishTime,p),d&&t&&t((function(){s(n,o,g)}))}else a.error("No dataLoadingFinishTime for subpage "+n+".");else a.error("No subpage "+n+".")},finishDataRendering:s,getLastSpaSubPage:function(e){return i[e]||(a.error("No subpage "+e+"."),null)},setLogger:function(e){a=e}}}function n(t){var n=i[t],s=r[t];if(n&&s)if(s.stubRenderingFinishTime)a.error("finishStubRendering have been called repeatedly for subpage "+t+".");else{var o=e.getTime();s.stubRenderingFinishTime=o,!s.stubRenderingStartTime&&s.spaMetricsOptions&&s.spaMetricsOptions.startStubRenderingMetric&&a.error("No stubRenderingStartTime for subpage "+t+"."),s.spaMetricsOptions&&s.spaMetricsOptions.finishStubRenderingMetric&&e.sendDelta("stub.render.finish",o-(s.stubRenderingStartTime||Number(n[689.2322])),n)}else a.error("No subpage "+t+".")}function s(t,n,s){n=n||"",s="number"==typeof s?s:1e3;var o=i[t],d=r[t];if(o&&d)if(d.dataRenderingStartTime)if(d.dataRenderingFinishTime)a.error("finishDataRendering have been called repeatedly for subpage "+t+".");else{var g=e.getTime();d.dataRenderingFinishTime=g,d.spaMetricsOptions&&d.spaMetricsOptions.finishDataRenderingMetric&&e.sendDelta("data.render.finish"+(n?"."+n:""),g-d.dataRenderingStartTime,o),d.spaMetricsOptions&&d.spaMetricsOptions.animationSpeedMetric&&e.sendAnimationSpeed&&e.sendAnimationSpeed("data.render"+(n?"."+n:"")+".animation",s,o)}else a.error("No dataRenderingStartTime for subpage "+t+".");else a.error("No subpage "+t+".")}}(Ya.Rum);
